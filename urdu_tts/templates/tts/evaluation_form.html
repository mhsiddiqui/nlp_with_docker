{% load custom_filters %}

<h1>Evaluation Form</h1>
<div class="alert alert-danger alert-div" role="alert" id="form-error"></div>
<form>
    {% for question in results %}
        {% if question.type == 1 or question.type == 2 %}
            <div class="card custom-card" id="q{{ question.id }}" data-type="{{ question.type }}"
                 data-id="{{ question.id }}">
                <div class="card-header">
                    <table style="width: 100%">
                        <tr>
                            <td><a id="text-{{ question.id }}" href="#q{{ question.id }}"
                                   style="color: black;">{{ forloop.counter }}#</a></td>
                            <td>
                                <button href="#" type="button" class="btn btn-link tooltip-div pull-right"
                                        data-toggle="tooltip"
                                        data-placement="top"
                                        title="{{ question.type|question_help }}">
                                    <i class="fa fa-question"></i>
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="card-body" style="margin-top: 20px">
                    <h5 class="card-title" style="margin-left: 20px">
                        <span id="text-{{ question.id }}">{{ question.text }}</span>
                    </h5>
                    <p class="card-text">
                    <ul class="list-group list-group-flush center-div" style="width: 94%;">
                        {% for option in question.option %}
                            <li class="list-group-item" onclick="select_checkbox(event)">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="radio"
                                           name="{{ question.id }}"
                                           id="option_{{ option.id }}_{{ question.id }}"
                                           value="{{ option.id }}">
                                    {{ option.text }}
                                </label>
                            </li>
                        {% endfor %}
                    </ul>
                    </p>
                </div>
            </div>
        {% elif question.type == 3 %}
            <div class="card custom-card" id="q{{ question.id }}" data-type="{{ question.type }}"
                 data-id="{{ question.id }}">
                <div class="card-header">
                    <table style="width: 100%">
                        <tr>
                            <td><a id="text-{{ question.id }}" href="#q{{ question.id }}"
                                   style="color: black;">{{ forloop.counter }}#</a></td>
                            <td>
                                <button href="#" type="button" class="btn btn-link tooltip-div pull-right"
                                        data-toggle="tooltip"
                                        data-placement="top"
                                        title="{{ question.type|question_help }}">
                                    <i class="fa fa-question"></i>
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="card-body" style="margin-top: 20px">
                    <h5 class="card-title" style="margin-left: 20px">
                        <span id="text-{{ question.id }}">{{ question.text }}</span>
                    </h5>
                    <p class="card-text">
                    <table class="table table-bordered form-table center-div" style="width: 94%;">
                        {% for property in question.option %}
                            <tr>
                                <td>{{ property.name }}</td>
                                {% for i in property.options %}
                                    <td style="cursor: pointer" onclick="select_checkbox(event)">
                                        <div class="form-check form-check-inline">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="radio"
                                                       data-property="{{ property.key }}"
                                                       name="{{ property.key }}_{{ question.id }}"
                                                       id="rate_{{ property.key }}_{{ question.id }}_{{ i }}"
                                                       value="{{ i }}">
                                                {{ i }}
                                            </label>
                                        </div>
                                    </td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </table>
                    </p>
                </div>
            </div>
        {% endif %}
    {% endfor %}
</form>
<div id="next_button">
    {% if next %}
        <button type="button" class="btn btn-primary pull-right" onclick="next_section('{{ next }}')" id="save-form">
            Next <i class="fa fa-arrow-right"></i>
        </button>
    {% else %}
        <button type="button" class="btn btn-primary pull-right" onclick="submit_final_form()" id="save-form">
            Submit <i class="fa fa-send"></i>
        </button>
    {% endif %}
</div>